# –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
# –í —ç—Ç–æ–π –≥–ª–∞–≤–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–¥–µ–ª–∞—é—Ç –≤–∞—à–µ
# –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª—É—á—à–µ.
# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
# –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫
# ‚óè 400: –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
# ‚óè 401: –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
# ‚óè 403: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
# ‚óè 404: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
# ‚óè 500: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
# –ò–Ω–æ–≥–¥–∞ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫—É 500. –í –∏–¥–µ–∞–ª—å–Ω–æ–º
# –º–∏—Ä–µ –∫–æ–¥ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –∏ –Ω–µ –æ—Ç–¥–∞—ë—Ç –æ—à–∏–±–∫—É 500. –ù–æ
# –ø–æ—á–µ–º—É –±—ã –Ω–µ –ø–æ–¥—Å—Ç–µ–ª–∏—Ç—å —Å–æ–ª–æ–º–∫–∏.
# –£–¥–∞–ª–∏–º —Ñ—É–Ω–∫—Ü–∏–∏ get_blog –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ. –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –Ω–∞–π—Ç–∏ —Å—Ç–∞—Ç—å—é –ø–æ id
# –ø–æ–ª—É—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:
# Internal Server Error
# The server encountered an internal error and was unable to complete your request.
# Either the server is overloaded or there is an error in the application.
# üî• –í–∞–∂–Ω–æ! –ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏, –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–∞
# —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –æ—à–∏–±–∫–∏, –∞ –Ω–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
# debug=False
# –í –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –Ω–∞–ø–∏—à–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å—Ç–∏–ª–µ –ø—Ä–æ–µ–∫—Ç–∞.
import logging
from flask import Flask, render_template, request, abort

# from lecture_2.db import get_blog

app = Flask(__name__)
logger = logging.getLogger(__name__)


@app.route('/')
def index():
    return '<h1>Hello world!</h1>'


@app.route('/blog/<int:id>')
def get_blog_by_id(id):
    ...
    # –¥–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –≤ –ë–î –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å—Ç–∞—Ç—å–∏ –ø–æ id
    result = get_blog(id)
    if result is None:
        abort(404)
    ...


# –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞–π–¥–µ–Ω–Ω—É—é –≤ –ë–î —Å—Ç–∞—Ç—å—é
@app.errorhandler(404)
def page_not_found(e):
    logger.warning(e)
    context = {
        'title': '–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞',
        'url': request.base_url,
    }
    return render_template('404.html', **context), 404


@app.errorhandler(500)
def page_not_found(e):
    logger.error(e)
    context = {
        'title': '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞',
        'url': request.base_url,
    }
    return render_template('500.html', **context), 500


if __name__ == '__main__':
    # app.run(debug=True)
    app.run(debug=False)
# –ü–æ —Å—É—Ç–∏ –≤–∑—è–ª–∏ –∑–∞ –æ—Å–Ω–æ–≤—É –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–∫–∏ 404, –Ω–æ –ª–æ–≥ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –Ω–µ
# –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –∞ –æ—à–∏–±–∫—É. –ü–ª—é—Å –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω, –∏ –≤–æ–∑–≤—Ä–∞—Ç –∫–æ–¥–∞ 500 –∫–ª–∏–µ–Ω—Ç—É
